<div
  x-data="{
    modal : false,          
    products : [],          
    categories : [],          
    
    check(){
      console.log(typeof this.products)
      console.log(this.products)          
    },      
    post_products(x){         
      fetch('https://mcanteen.deta.dev/products', { 
        method: 'POST',
        body : JSON.stringify(x)
      }).then(function(response) {
        return response.text();
      }).then(function(data) {
        console.log(JSON.parse(data))                
      })
          
      fetch('https://mcanteen.deta.dev/products', { 
        method: 'GET',        
      }).then(function(response) {
        return response.text();
      }).then(function(data) {
        console.log(JSON.parse(data))                
          this.products = data
      })
      
    }
  }"
  x-init="products = await (await fetch('https://mcanteen.deta.dev/products')).json()"
>
  <div class="k-ios k-app w-full h-full min-h-screen safe-areas relative">
    <div
      class="h-full w-full left-0 top-0 overflow-auto absolute bg-page-ios-light dark:bg-page-ios-dark"
    >
      <div class="w-full z-20 top-0 pt-safe sticky text-navbar-ios">
        <div
          class="absolute w-full h-full left-0 top-0 bg-bars-ios-light dark:bg-bars-ios-dark hairline-b translucent"
        ></div>
        <div
          class="flex relative items-center w-full overflow-hidden pl-2-safe pr-2-safe h-11 justify-between"
        >
          <div
            class="flex justify-center items-center h-full mr-2 transform transform-gpu"
          >
            <button
              @click="root = 'dashboard'"
              class="text-primary inline-flex space-x-1 justify-center items-center cursor-pointer select-none active:opacity-30 duration-300 active:duration-0 h-full max-h-12 cursor-pointer"
            >
              <span class=""
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="20"
                  viewbox="0 0 12 20"
                  fill="currentcolor"
                >
                  <path
                    d="M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"
                  ></path></svg></span
              ><span>Back</span>
            </button>
          </div>
          <div
            class="text-black dark:text-white whitespace-nowrap leading-tight font-semibold absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center"
          >
            Products
          </div>
          <div
            class="flex justify-center items-center h-full mr-2 transform transform-gpu"
          >
            <button
              @click="modal = true"
              class="text-primary inline-flex space-x-1 justify-center items-center cursor-pointer select-none active:opacity-30 duration-300 active:duration-0 h-full max-h-12 cursor-pointer"
            >
              <span>Add New</span>
            </button>
          </div>
        </div>
      </div>
      <div
        class="pl-4-safe pr-4-safe mt-8 flex justify-between items-center -mb-6 font-semibold"
      >
        Recently Added Products
      </div>
      
      <div x-show="products.length == 0" class="text-sm z-10 relative pl-4-safe pr-4-safe my-8 py-4 bg-block-strong-light dark:bg-block-strong-dark hairline-t hairline-b text-center"><span class="k-ios-preloader inline-block w-8 h-8 text-primary"><span class="block w-full h-full"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="currentcolor" class="w-full h-full"><path d="M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"></path><path d="M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z" opacity=".64"></path><path d="M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z" opacity=".82"></path><path d="M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z" opacity=".46"></path><path d="M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z" opacity=".37"></path><path d="M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z" opacity=".73"></path><path d="M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z" opacity=".91"></path><path d="M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z" opacity=".55"></path></svg></span></span></div>
      
      <div x-show="products.length != 0"
        class="my-8 bg-block-strong-light dark:bg-block-strong-dark hairline-t hairline-b relative z-10"
      >
        <!--         https://database.deta.sh/v1/c0qm30mo/users
        
        c0qm30mo_skUU7o12R7DRa678oTn8wbh7We4PzdRZ        
         -->
        <ul class="last-child-hairline-b-none">
          <!--           <li class="">
            <a
              class="pl-4-safe flex items-center duration-300 active:duration-0 cursor-pointer select-none active:hairline-transparent active:bg-black active:bg-opacity-10 dark:active:bg-white dark:active:bg-opacity-10"
              ><div class="pr-4-safe w-full relative hairline-b py-2.5">
                <div
                  class="flex justify-between items-center text-list-title-ios"
                >
                  <div class="shrink font-semibold">Chach</div>
                  <div
                    class="text-black dark:text-white text-opacity-55 shrink-0 ml-auto pl-1 flex items-center space-x-1 dark:text-opacity-55"
                  >
                    Rs. 15
                  </div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="8"
                    height="14"
                    viewBox="0 0 12 20"
                    fill="currentcolor"
                    class="opacity-20 shrink-0 ml-3"
                  >
                    <path
                      d="M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"
                    ></path>
                  </svg>
                </div>
                <div class="text-sm">Packed Food</div>
              </div></a
            >
          </li> -->

          <template x-for="p in products">
            <li class="">
              <a
                class="pl-4-safe flex items-center duration-300 active:duration-0 cursor-pointer select-none active:hairline-transparent active:bg-black active:bg-opacity-10 dark:active:bg-white dark:active:bg-opacity-10"
                ><div class="pr-4-safe w-full relative hairline-b py-2.5">
                  <div
                    class="flex justify-between items-center text-list-title-ios"
                  >
                    <div class="shrink font-semibold" x-text="p['title']">
                      ...
                    </div>
                    <div
                      class="text-black dark:text-white text-opacity-55 shrink-0 ml-auto pl-1 flex items-center space-x-1 dark:text-opacity-55"
                    >
                      Rs. <span x-text="p['price']"></span>
                    </div>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="8"
                      height="14"
                      viewBox="0 0 12 20"
                      fill="currentcolor"
                      class="opacity-20 shrink-0 ml-3"
                    >
                      <path
                        d="M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="text-sm uppercase" x-text="p['category']">
                    Packed Food
                  </div>
                </div></a
              >
            </li>
          </template>
        </ul>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div
    x-show="modal"
    class="left-1/2 top-1/2 transition-transform transform -translate-x-1/2 duration-400 z-40 md:rounded max-w-full max-h-full overflow-hidden md:no-safe-areas bg-white dark:bg-black fixed w-screen h-screen md:w-160 md:h-160 -translate-y-1/2"
  >    
    <div
      class="h-full w-full left-0 top-0 overflow-auto absolute bg-page-ios-light dark:bg-page-ios-dark"
    >
      <div x-show="categories.length == 0" class="text-sm z-10 relative pl-4-safe pr-4-safe my-8 py-4 bg-block-strong-light dark:bg-block-strong-dark hairline-t hairline-b text-center"><span class="k-ios-preloader inline-block w-8 h-8 text-primary"><span class="block w-full h-full"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="currentcolor" class="w-full h-full"><path d="M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"></path><path d="M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z" opacity=".64"></path><path d="M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z" opacity=".82"></path><path d="M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z" opacity=".46"></path><path d="M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z" opacity=".37"></path><path d="M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z" opacity=".73"></path><path d="M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z" opacity=".91"></path><path d="M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z" opacity=".55"></path></svg></span></span></div>
        
      <div x-show="categories.length != 0">
        
      <div class="w-full z-20 top-0 sticky text-navbar-ios">
        <div
          class="absolute w-full h-full left-0 top-0 bg-bars-ios-light dark:bg-bars-ios-dark hairline-b translucent"
        ></div>
        <div
          class="flex relative items-center w-full overflow-hidden pl-2-safe pr-2-safe h-11 justify-end"
        >
          <div
            class="text-black dark:text-white whitespace-nowrap leading-tight font-semibold absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center"
          >
            Product Form
          </div>
          <div
            class="flex justify-center items-center h-full ml-2 transform transform-gpu"
          >
            <button
              @click="modal = false"
              class="text-primary inline-flex space-x-1 justify-center items-center cursor-pointer select-none active:opacity-30 duration-300 active:duration-0 h-full max-h-12"
            >
              Close
            </button>
          </div>
        </div>
      </div>
      <div class="text-sm z-10 relative pl-4-safe pr-4-safe my-8 space-y-4">
        <div
          x-data="{ pr : {
                  'title' : ''
                  }}"
          class="my-8 bg-block-strong-light dark:bg-block-strong-dark hairline-t hairline-b relative z-10"
        >
          <ul class="last-child-hairline-b-none">
            <li class="">
              <div class="pl-4-safe flex items-center">
                <div class="pr-4-safe w-full relative hairline-b py-2.5">
                  <div class="text-xs duration-200">Title</div>
                  <div class="relative -mb-2.5">
                    <input
                      class="block text-base appearance-none w-full focus:outline-none bg-transparent h-11 placeholder-black placeholder-opacity-30 dark:placeholder-white dark:placeholder-opacity-30"
                      type="text"
                      x-model="pr['title']"
                      placeholder="Name of product"
                      value=""
                    />
                  </div>
                </div>
              </div>
            </li>
            <li class="">
              <div class="pl-4-safe flex items-center">
                <div class="pr-4-safe w-full relative hairline-b py-2.5">
                  <div class="text-xs duration-200">Price</div>
                  <div class="relative -mb-2.5">
                    <input
                      class="block text-base appearance-none w-full focus:outline-none bg-transparent h-11 placeholder-black placeholder-opacity-30 dark:placeholder-white dark:placeholder-opacity-30"
                      type="number"
                      placeholder="Price"
                      x-model="pr['price']"
                      value=""
                    />
                  </div>
                </div>
              </div>
            </li>
            <li class="">
              <div
                class="pl-4-safe flex items-center"
                x-init="categories = await (await fetch('https://mcanteen.deta.dev/categories')).json()"
              >
                <div class="pr-4-safe w-full relative hairline-b py-2.5">
                  <div class="text-xs duration-200">Category</div>

                  <div
                    class="relative -mb-2.5 shrink-10 w-full -mt-2.5"
                    x-init="categories = await (await fetch('https://mcanteen.deta.dev/categories')).json()"
                  >
                    <select
                      x-model="pr['category']"
                      class="block text-base appearance-none w-full focus:outline-none bg-transparent h-11 placeholder-black placeholder-opacity-30 dark:placeholder-white dark:placeholder-opacity-30"
                      placeholder="Please choose..."
                    >
                      <option value="select" disabled selected>Select</option>
                      <template x-for="c in categories">
                        <option :value="c['title']" x-text="c['title']"></option>  
                      </template>
                      
                      </select>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="8"
                      height="5"
                      viewBox="0 0 8 5"
                      fill="currentcolor"
                      class="absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50"
                    >
                      <polygon
                        fill-rule="evenodd"
                        points="0 0 8 0 4 5"
                      ></polygon>
                    </svg>
                  </div>
                </div>
              </div>
            </li>
            <li class="">
              <div class="pl-4-safe flex items-center mb-8">
                <div
                  class="pr-4-safe w-full relative hairline-b py-2.5 flex gap-2 items-center"
                >
                  <div class="text-xs duration-200 pr-4">is active ?</div><br>
                  <div class="relative -mb-2.5 flex gap-4 items-center">
                    <div>
                      <input
                        type="radio"
                        x-model="pr['is_active']"
                        value="true"
                      />
                      <label for="true">Active</label>
                    </div>
                    <div>
                      <input
                        type="radio"
                        x-model="pr['is_active']"
                        value="false"
                      />
                      <label for="false">InActive</label>
                    </div>
                  </div>
                </div>
              </div>
            </li>   
            <li class="">
              <button @click="post_products(pr)"
                      class="relative hairline-b active:hairline-transparent flex items-center justify-center px-4 space-x-1 active:bg-opacity-15 w-full duration-300 active:duration-0 focus:outline-none text-primary active:bg-primary touch-ripple-primary overflow-hidden select-none h-11">
                Submit
              </button>
            </li>
            
          </ul>
        </div>
      </div>  
      </div>      
    </div>
  </div>
</div>
